___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "EBOD Purchase Tracking Script",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Essential prerequisite for tracking your online data with EBOD application.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "tokenId",
    "displayName": "Website Token key",
    "simpleValueType": true,
    "notSetText": "Token must be set",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "email",
    "displayName": "Purchase email address",
    "simpleValueType": true,
    "help": "Purchase email address",
    "notSetText": "Purchase email address must be set",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "externalId",
    "displayName": "Purchase ID or External ID",
    "simpleValueType": true,
    "notSetText": "External ID must be set",
    "help": "",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "languageCode",
    "displayName": "[optional] Purchase language code - default: en",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "currency",
    "displayName": "[optional] Purchase Currency code",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "totalPrice",
    "displayName": "[optional] Purchase total price",
    "simpleValueType": true
  },
  {
    "type": "CHECKBOX",
    "name": "debug",
    "checkboxText": "Log debug messages to console",
    "simpleValueType": true,
    "defaultValue": ""
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Require the necessary APIs
const logToConsole = require('logToConsole');
const injectScript = require('injectScript');
const callInWindow = require('callInWindow');
const setInWindow = require('setInWindow');
const queryPermission = require('queryPermission');

// Get the URL the user input into the text field
const url = 'https://e.bod.digital/init.js?v=2909';
const token = data.tokenId;

// If the user chose to log debug output, initialize the logging method
const log = data.debug ? logToConsole : (() => {});

log('[EBOD] Email: ' + data.email + ', ExternalId: ' + data.externalId);
log('[EBOD] Loading script from ' + url + ', Token: ' + token);

// If the script loaded successfully, log a message and signal success
const onSuccess = () => {
  log('[EBOD] Script loaded successfully.');
  callInWindow('Ebod.init', token);
  callInWindow('Ebod.purchase', {
    event: 'ebod_purchase',
    email: data.email,
    externalId: data.externalId,
    currency: data.currency || '',
    totalPrice: data.totalPrice || '',
    languageCode: data.languageCode || 'en'
  });
  data.gtmOnSuccess();
};

// If the script fails to load, log a message and signal failure
const onFailure = () => {
  log('[EBOD] Script load failed.');
  data.gtmOnFailure();
};

// If the URL input by the user matches the permissions set for the template,
// inject the script with the onSuccess and onFailure methods as callbacks.
if (queryPermission('inject_script', url)) {
  injectScript(url, onSuccess, onFailure);
} else {
  log('[EBOD] Script load failed due to permissions mismatch.');
  data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.bod.digital/"
              },
              {
                "type": 1,
                "string": "https://bod.digital/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "Ebod"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "Ebod.init"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "Ebod.purchase"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Test
  code: |-
    const mockData = {
      email: 'test@example.com',
      externalId: 123,
      tokenId: 'test'
    };
    runCode(mockData);
    assertApi('gtmOnFailure').wasNotCalled();


___NOTES___

Created on 30. 7. 2023 15:09:53

Updated at 29. 9. 2023 09:05:03 - add new feature languageCode

*/
